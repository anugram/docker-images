deployment:
  labels: {}
  securityContext: {}
#    fsGroup: 3000
#    runAsUser: 65534

replicaCount: 2
openshiftEnabled: false
debug: false

gatewayCert:
  tlsCertsSecretName:

containerSecurityContext: {}

image:
  repository: docker.registry-2.akeyless.io/k8s-webhook-server
  agentImage: docker.registry-2.akeyless.io/k8s-secrets-sidecar
  pullPolicy: IfNotPresent

serviceAccount:
  create: true
  automountServiceAccountToken: true
  labels: {}

restartRollout:
  enabled: false
  interval: 1m

livenessProbe:
  initialDelaySeconds: 10
  periodSeconds: 30
  failureThreshold: 5

readinessProbe:
  initialDelaySeconds: 10
  periodSeconds: 30
  timeoutSeconds: 5

service:
  name: secrets-webhook
  type: ClusterIP
  externalPort: 443
  internalPort: 8443
  labels: {}

# for EKS using custom CNI
#hostNetwork: true

env:
  AKEYLESS_URL: "https://{{ CM_IP }}:8080"
  AKEYLESS_ACCESS_ID: {{  AKL_ACCESS_ID }}
  AKEYLESS_ACCESS_TYPE: "api_key"
  AKEYLESS_API_KEY: {{  AKL_ACCESS_KEY }}

  AKEYLESS_AGENT_LIMITS_CPU: "500m"
  AKEYLESS_AGENT_REQUESTS_CPU: "250m"
  AKEYLESS_AGENT_LIMITS_MEM: "128Mi"
  AKEYLESS_AGENT_REQUESTS_MEM: "64Mi"


resources:
  limits:
    cpu: 0.5
    memory: 192Mi
  requests:
    cpu: 0.25
    memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: |
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        topologyKey: kubernetes.io/hostname
        labelSelector:
          matchLabels:
            app: {{ template "vault-secrets-webhook.name" . }}
            release: {{ .Release.Name }}

HPA:
  # Note that metrics server must be installed for this to work:
  # https://github.com/kubernetes-sigs/metrics-server
  enabled: false
  minReplicas: 1
  maxReplicas: 14
  cpuAvgUtil: 50
  memAvgUtil: 50

  annotations: {}
